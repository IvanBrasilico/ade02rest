openapi: 3.0.1
info:
  title: APIRecintos
  description: API para prestação de informações sobre eventos de controle aduaneiro
    a cargo dos Redex, Recintos, Administradores e Operadores Aeroportuários, Portuários
    e demais intervenientes em carga sobre controle aduaneiro.
  version: "0.9"
servers:
- url: /
paths:
  /posicaoconteiner:
    post:
      operationId: api.posicaoconteiner
      requestBody:
        description: Controle de posição dos Contëineres no Pátio
        content:
          application/json:
            schema:
              x-body-name: evento
              $ref: '#/components/schemas/PosicaoConteiner'
        required: true
      responses:
        200:
          description: Evento incluido
          content: {}
        405:
          description: Evento invalido
          content: {}
  /posicaoconteiner/list:
    post:
      operationId: api.list_posicaoconteiner
      requestBody:
        description: Lista de posição dos Contëineres no Pátio
        content:
          application/json:
            schema:
              x-body-name: filtro
              $ref: '#/components/schemas/FiltroPosicaoConteiner'
        required: true
      responses:
        200:
          description: Evento Base
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArrayPosicaoConteiner'
        400:
          description: Erro
          content: {}
        404:
          description: Eventos não encontrados para filtro atual.
          content: {}
        default:
          description: Erro inesperado
          content: {}

  /posicaoconteiner/{IDEvento}:
    get:
      operationId: api.get_posicaoconteiner
      parameters:
      - name: IDEvento
        in: path
        description: ID do Evento no Sistema original
        required: true
        schema:
          type: integer
      responses:
        200:
          description: Evento Base
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PosicaoConteiner'
        400:
          description: ID inválido
          content: {}
        404:
          description: Evento com ID não encontrado para recinto atual.
          content: {}
        default:
          description: Erro inesperado
          content: {}
  /pesagemmaritimo:
    post:
      operationId: api.pesagemmaritimo
      requestBody:
        description: Controle de pesagem no modal maritimo
        content:
          application/json:
            schema:
              x-body-name: evento
              $ref: '#/components/schemas/PesagemMaritimo'
        required: true
      responses:
        200:
          description: Evento incluido
          content: {}
        405:
          description: Evento invalido
          content: {}
  /pesagemmaritimo/{IDEvento}:
    get:
      operationId: api.get_pesagemmaritimo
      parameters:
      - name: IDEvento
        in: path
        description: ID do Evento no Sistema original
        required: true
        schema:
          type: integer
      responses:
        200:
          description: Evento Base
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PesagemMaritimo'
        400:
          description: ID inválido
          content: {}
        404:
          description: Evento com ID não encontrado para recinto atual.
          content: {}
        default:
          description: Erro inesperado
          content: {}
  /acessoveiculo:
    post:
      operationId: api.acessoveiculo
      requestBody:
        description: Controle de passagem em ponto de controle / entrada e saida de
          veiculos em area
        content:
          application/json:
            schema:
              x-body-name: evento
              $ref: '#/components/schemas/AcessoVeiculo'
        required: true
      responses:
        200:
          description: Evento incluido
          content: {}
        405:
          description: Evento invalido
          content: {}
  /acessoveiculo/{IDEvento}:
    get:
      operationId: api.get_acessoveiculo
      parameters:
      - name: IDEvento
        in: path
        description: ID do Evento no Sistema original
        required: true
        schema:
          type: integer
      responses:
        200:
          description: Evento Base
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AcessoVeiculo'
        400:
          description: ID inválido
          content: {}
        404:
          description: Evento com ID não encontrado para recinto atual.
          content: {}
        default:
          description: Erro inesperado
          content: {}
  /inspecaonaoinvasiva:
    post:
      operationId: api.inspecaonaoinvasiva
      requestBody:
        description: Controle de inspecoes nao invasiva - recepcao de imagens
        content:
          application/json:
            schema:
              x-body-name: evento
              $ref: '#/components/schemas/InspecaonaoInvasiva'
        required: true
      responses:
        200:
          description: Evento incluido
          content: {}
        405:
          description: Evento invalido
          content: {}
  /inspecaonaoinvasiva/{IDEvento}:
    get:
      operationId: api.get_inspecaonaoinvasiva
      parameters:
      - name: IDEvento
        in: path
        description: ID do Evento no Sistema original
        required: true
        schema:
          type: integer
      responses:
        200:
          description: Evento Base
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InspecaonaoInvasiva'
        400:
          description: ID inválido
          content: {}
        404:
          description: Evento com ID não encontrado para recinto atual.
          content: {}
        default:
          description: Erro inesperado
          content: {}
components:
  schemas:
    EntradaSaida:
      type: string
      description: Operação de entrada ou de saída de carga
      enum:
      - Entrada
      - Saida
    Autoridade:
      type: string
      description: Sigla da autoridade
      enum:
      - RFB
      - MAPA
      - ACI
      - ANVISA
      - IBAMA
      - PF
      - JUSTICA
    TipoDocumentoTransporte:
      type: string
      description: Sigla que identifica o tipo de documento de transporte que ampara a entrada ou saida da carga
      enum:
      - CE
      - NFE
      - DUE
      - DA
      - DTA
      - DI
    FormaIdentificacao:
      type: string
      description: Identificação (cartão-C, biométrico-B, facial-F ou manual-M)
      enum:
      - C
      - B
      - F
      - M
    TipoModal:
      type: string
      description: Sigla do modal
      enum:
      - Ferroviario
      - Rodoviario
      - Aereo
      - Maritimo
    Evento:
      type: object
      properties:
        IDEvento:
          type: integer
          description: ID do Evento no sistema original, para referencia e consulta
        dataevento:
          type: string
          description: Data de ocorrência física do evento
          format: date-time
        operadorevento:
          type: string
          description: CPF do Operador que realizou o evento fisicamente/presencialmente
        dataregistro:
          type: string
          description: Data de registro do evento no Sistema
          format: date-time
        operadorregistro:
          type: string
          description: CPF do Operador que registrou o evento no Sistema
        retificador:
          type: boolean
          description: Retifica evento anteriormente transmitido
    CredenciamentoPessoa:
      allOf:
      - $ref: '#/components/schemas/Evento'
      - type: object
        properties:
          cpf:
            type: string
            description: CPF da Pessoa credenciada
          identidade:
            type: string
            description: RG ou Identidade do estrangeiro
          cnh:
            type: string
            description: Numero do CNH (para motoristas)
          nome:
            type: string
            description: Nome da Pessoa credenciada
          datanascimento:
            type: string
            description: Data de nascimento
            format: date
          representado:
            type: string
            description: CNPJ/CPF representado
          nomerepresentado:
            type: string
            description: Nome representado
          funcao:
            type: string
            description: Função na empresa representada
          iniciovalidade:
            type: string
            description: Início Período de validade do credenciamento
            format: date-time
          fimvalidade:
            type: string
            description: Fim Período de validade do credenciamento
            format: date-time
          horaentrada:
            type: string
            description: Hora comum de entrada
            format: time
          horasaida:
            type: string
            description: Hora comum de saida
            format: time
          permissao:
            type: string
            description: Areas permitidas acesso
          materiais:
            type: string
            description: Lista materiais/ferramentas de trabalho
          status:
            type: boolean
            description: Ativo/Inativo
          motivacao:
            type: string
            description: Motivacao de acesso ao terminal
    AcessoPessoa:
      allOf:
      - $ref: '#/components/schemas/Evento'
      - type: object
        properties:
          direcao:
            $ref: '#/components/schemas/EntradaSaida'
          formaidentificacao:
            $ref: '#/components/schemas/FormaIdentificacao'
          cpf:
            type: string
            description: CPF da Pessoa credenciada
          identidade:
            type: string
            description: RG ou Identidade do estrangeiro
          portaoacesso:
            type: string
            description: Codigo do portao utilizado para entrada
          reserva:
            type: string
            description: Reserva
          numerovoo:
            type: string
            description: Numero do voo
    CredenciamentoVeiculo:
      allOf:
      - $ref: '#/components/schemas/Evento'
      - type: object
        properties:
          responsavel:
            type: string
            description: CNPJ do responsavel pelo veiculo
          placa:
            type: string
            description: Placa Cavalo-trator/truck/automóvel
          reboques:
            type: array
            items:
              type: object
              properties:
                placa:
                  type: string
          marca:
            type: string
            description: Marca
          modelo:
            type: string
            description: Modelo
          ano:
            type: string
            description: Ano
          geolocalizacao:
            type: boolean
            description: Verdadeiro para veículo com monitoramento de posição via
              satélite ou similar
          iniciovalidade:
            type: string
            description: Início Período de validade do credenciamento
            format: date-time
          fimvalidade:
            type: string
            description: Fim Período de validade do credenciamento
            format: date-time
          horaentrada:
            type: string
            description: Hora comum de entrada
            format: time
          horasaida:
            type: string
            description: Hora comum de saida
            format: time
          permissao:
            type: string
            description: Areas permitidas acesso
    AgendamentoVeiculo:
      allOf:
      - $ref: '#/components/schemas/Evento'
      - type: object
        properties:
          tipooperacao:
            $ref: '#/components/schemas/EntradaSaida'
          documentotransporte:
            type: string
            description: Numero do documento de transporte
          tipodocumentotransporte:
            $ref: '#/components/schemas/TipoDocumentoTransporte'
          placa:
            type: string
            description: Placa Cavalo-trator/truck/automóvel
          dimensaoespecial:
            type: boolean
            description: Dimensoes que impecam entrada comum ou escaneamento(OOG)
          pesoespecial:
            type: boolean
            description: Peso que impeca entrada comum ou escaneamento(OOG)
          listanfe:
            type: array
            items:
              type: object
              properties:
                chavenfe:
                  type: string
          reboques:
            type: array
            items:
              type: object
              properties:
                placa:
                  type: string
                vazio:
                  type: boolean
                lacres:
                  type: string
                lacressif:
                  type: string
                localsif:
                  type: string
                cnpjestadia:
                  type: string
                nomeestadia:
                  type: string
          containers:
            type: array
            items:
              type: object
              properties:
                numero:
                  type: string
                vazio:
                  type: boolean
                lacres:
                  type: string
                lacressif:
                  type: string
                localsif:
                  type: string
                portodescarga:
                  type: string
                paisdestino:
                  type: string
                  description: Pais destino da carga
                navioembarque:
                  type: string
                cpfcnpjcliente:
                  type: string
                nomecliente:
                  type: string
          cpfcnpjtransportador:
            type: string
            description: CPF ou CNPJ do Transportador responsável
          nometransportador:
            type: string
            description: Nome do Transportador responsável
          cpfmotorista:
            type: string
            description: CPF do Motorista
          nomemotorista:
            type: string
            description: Nome do Motorista
          dataagendamento:
            type: string
            description: Data e Hora agendada
            format: date-time
          modal:
            $ref: '#/components/schemas/TipoModal'
          areasacesso:
            type: string
            description: Areas a que veiculo tera acesso
    AcessoVeiculo:
      allOf:
      - $ref: '#/components/schemas/Evento'
      - type: object
        properties:
          tipooperacao:
            $ref: '#/components/schemas/EntradaSaida'
          IDAgendamento:
            type: integer
            description: ID do Agendamento desta operação, se houver
          IDGate:
            type: string
            description: Identificador do Portao de ocorrencia do Evento
          documentotransporte:
            type: string
            description: Numero do conteiner
          tipodocumentotransporte:
            $ref: '#/components/schemas/TipoDocumentoTransporte'
          placa:
            type: string
            description: Placa Cavalo-trator/truck/automóvel
          dimensaoespecial:
            type: boolean
            description: Dimensoes que impecam entrada comum ou escaneamento(OOG)
          pesoespecial:
            type: boolean
            description: Peso que impeca entrada comum ou escaneamento(OOG)
          listanfe:
            type: array
            items:
              type: object
              properties:
                chavenfe:
                  type: string
          reboques:
            type: array
            items:
              type: object
              properties:
                placa:
                  type: string
                vazio:
                  type: boolean
                lacres:
                  type: string
                lacressif:
                  type: string
                localsif:
                  type: string
                cnpjestadia:
                  type: string
                nomeestadia:
                  type: string
                lacresverificado:
                  type: string
                lacressifverificado:
                  type: string
                avarias:
                  type: string
          containers:
            type: array
            items:
              type: object
              properties:
                numero:
                  type: string
                vazio:
                  type: boolean
                lacres:
                  type: string
                lacressif:
                  type: string
                localsif:
                  type: string
                portodescarga:
                  type: string
                paisdestino:
                  type: string
                  description: Pais destino da carga
                navioembarque:
                  type: string
                cpfcnpjcliente:
                  type: string
                nomecliente:
                  type: string
                numerobooking:
                  type: string
                lacresverificado:
                  type: string
                lacressifverificado:
                  type: string
                avarias:
                  type: string
          cpfcnpjtransportador:
            type: string
            description: CPF ou CNPJ do Transportador responsável
          nometransportador:
            type: string
            description: Nome do Transportador responsável
          cpfmotorista:
            type: string
            description: CPF do Motorista
          nomemotorista:
            type: string
            description: Nome do Motorista
          dataagendamento:
            type: string
            description: Data e Hora agendada
            format: date-time
          modal:
            $ref: '#/components/schemas/TipoModal'
          ocr:
            type: boolean
            description: Captura automática de placa (OCR)
          dataliberacao:
            type: string
            description: Data e hora da comunicação de liberação da carga pelo recinto
              (apenas na saída)
            format: date-time
    PesagemVeiculoVazio:
      allOf:
      - $ref: '#/components/schemas/Evento'
      - type: object
        properties:
          placa:
            type: string
            description: Placa do caminhao/truck/cavalo
          reboques:
            type: array
            items:
              type: object
              properties:
                placa:
                  type: string
          pesobalanca:
            type: integer
            description: Peso bruto da balanca
    PesagemMaritimo:
      allOf:
      - $ref: '#/components/schemas/Evento'
      - type: object
        properties:
          documentotransporte:
            type: string
            description: Numero do conteiner
          tipodocumentotransporte:
            $ref: '#/components/schemas/TipoDocumentoTransporte'
          numero:
            type: string
            description: Numero do conteiner
          placa:
            type: string
            description: Placa do caminhao/truck/cavalo
          placasemireboque:
            type: string
            description: Placa semireboque em caso de carregamento
          pesobrutodeclarado:
            type: integer
            description: Peso bruto declarado nos documentos de transporte em kg
          taraconjunto:
            type: integer
            description: Peso do conjunto cavalo-carreta retirado da balanca e cadastrado no Recinto
          pesobalanca:
            type: integer
            description: Peso do conjunto cavalo-carreta-carga retirado da balanca
          capturaautomatica:
            type: boolean
            description: Captura realizada automaticamente pela balanca, sem intervencao manual ou digitacao
    PesagemTerrestre:
      allOf:
      - $ref: '#/components/schemas/Evento'
      - type: object
        properties:
          documentotransporte:
            type: string
            description: Numero do conteiner
          tipodocumentotransporte:
            $ref: '#/components/schemas/TipoDocumentoTransporte'
          pesobrutodeclarado:
            type: integer
            description: Peso bruto declarado nos documentos de transporte em kg
          placa:
            type: string
            description: Placa do caminhao/truck/cavalo
          tara:
            type: integer
            description: Tara do caminhao/truck/cavalo
          reboques:
            type: array
            items:
              type: object
              properties:
                placa:
                  type: string
                tara:
                  type: integer
          conteineres:
            type: array
            items:
              type: object
              properties:
                numero:
                  type: string
                tara:
                  type: integer
          pesobalanca:
            type: integer
            description: Peso do conjunto cavalo-carreta-carga retirado da balanca
          capturaautomatica:
            type: boolean
            description: Captura realizada automaticamente pela balanca, sem intervencao manual ou digitacao
    InspecaonaoInvasiva:
      allOf:
      - $ref: '#/components/schemas/Evento'
      - type: object
        properties:
          documentotransporte:
            type: string
            description: Numero do documento de transporte
          tipodocumentotransporte:
            $ref: '#/components/schemas/TipoDocumentoTransporte'
          identificadores:
            type: array
            items:
              type: object
              properties:
                identificacao:
                  type: string
          numero:
            type: string
            description: Numero do conteiner
          placa:
            type: string
            description: Placa do caminhao/truck/cavalo
          placasemireboque:
            type: string
            description: Placa semireboque em caso de carregamento
          dataacriacao:
            type: string
            description: Data e Hora da criacao do arquivo
            format: date-time
          dataamodificacao:
            type: string
            description: Data e Hora da ultima modificacao do arquivo
            format: date-time
          nomearquivo:
            type: string
            description: Nome e caminho do arquivo original de imagem
          capturaautomatica:
            type: boolean
            description: Captura realizada automaticamente pela balanca, sem intervencao manual ou digitacao
    PosicaoVeiculoPatio:
      allOf:
      - $ref: '#/components/schemas/Evento'
      - type: object
        properties:
          documentotransporte:
            type: string
            description: Numero do conteiner
          tipodocumentotransporte:
            $ref: '#/components/schemas/TipoDocumentoTransporte'
          placa:
            type: string
            description: Placa do caminhao/truck/cavalo ou chassi(veiculo-mercadoria)
          reboques:
            type: array
            items:
              type: object
              properties:
                placa:
                  type: string
                vazio:
                  type: boolean
          conteineres:
            type: array
            items:
              type: object
              properties:
                numero:
                  type: string
                vazio:
                  type: boolean
          box:
            type: string
            description: Codigo do box
          solicitante:
            $ref: '#/components/schemas/Autoridade'
          emconferencia:
            type: boolean
            description: Posicao propria para desunitizacao ou conferencia
          divergencia:
            type: boolean
            description: Tem divergencia
          observacaodivergencia:
            type: string
          camera:
            type: string
            description: Codigo da camera
    PosicaoConteiner:
      allOf:
      - $ref: '#/components/schemas/Evento'
      - type: object
        properties:
          numero:
            type: string
            description: Numero do conteiner
          placa:
            type: string
            description: Placa semireboque em caso de carregamento
          posicao:
            type: string
            description: Codigo que identifica a pilha no recinto
          emconferencia:
            type: boolean
            description: Posicao propria para desunitizacao ou conferencia
          solicitante:
            $ref: '#/components/schemas/Autoridade'
    FiltroPosicaoConteiner:
      type: object
      properties:
        recinto:
          type: string
          description: Codigo do Recinto a pesquisar
        datainicial:
          type: string
          description: Data de ocorrência física do evento - inicio de pesquisa
          format: date-time
        datafinal:
          type: string
          description: Data de ocorrência física do evento - final de pesquisa
          format: date-time
        altura:
          type: integer
          description: Altura do conteiner na pilha
    ArrayPosicaoConteiner:
      type: array
      items:
        $ref: '#/components/schemas/PosicaoConteiner'

